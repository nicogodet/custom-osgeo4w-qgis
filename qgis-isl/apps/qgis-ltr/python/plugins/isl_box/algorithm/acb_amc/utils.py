# -*- coding: utf-8 -*-

"""
***************************************************************************
    courbes_dommages.py
    ---------------------
    Date                 : Mai 2021
    Copyright            : (C) 2021 par ISL
    Email                : godet@isl.fr, planque@isl.fr
***************************************************************************
"""

__author__ = "Nicolas GODET, Baptiste PLANQUE"
__date__ = "Mai 2021"
__copyright__ = "(C) 2021, ISL, Nicolas GODET, Baptiste PLANQUE"

from qgis.analysis import QgsZonalStatistics
from qgis.core import (
    QgsPointXY,
    QgsRaster,
)


classes = [
    "[0,0]",
    "[1,15]",
    "[15,25]",
    "[25,35]",
    "[35,45]",
    "[45,55]",
    "[55,65]",
    "[65,75]",
    "[75,85]",
    "[85,95]",
    "[95,105]",
    "[105,115]",
    "[115,125]",
    "[125,135]",
    "[135,145]",
    "[145,155]",
    "[155,165]",
    "[165,175]",
    "[175,185]",
    "[185,195]",
    "[195,205]",
    "[205,215]",
    "[215,225]",
    "[225,235]",
    "[235,245]",
    "[245,255]",
    "[255,265]",
    "[265,275]",
    "[275,285]",
    "[285,295]",
    "[295,305]",
]

logements_dommages_surfaciques = {
    "< 48h": {
        "HI-SE-AS": {
            "[0,0]": 0,
            "[1,15]": 97.36,
            "[15,25]": 194.72,
            "[25,35]": 194.72,
            "[35,45]": 194.72,
            "[45,55]": 194.72,
            "[55,65]": 212.59,
            "[65,75]": 230.45,
            "[75,85]": 248.32,
            "[85,95]": 266.19,
            "[95,105]": 284.06,
            "[105,115]": 293.37,
            "[115,125]": 302.67,
            "[125,135]": 311.98,
            "[135,145]": 321.29,
            "[145,155]": 330.60,
            "[155,165]": 336.09,
            "[165,175]": 341.59,
            "[175,185]": 347.08,
            "[185,195]": 352.58,
            "[195,205]": 358.07,
            "[205,215]": 370.10,
            "[215,225]": 382.12,
            "[225,235]": 394.15,
            "[235,245]": 406.17,
            "[245,255]": 418.20,
            "[255,265]": 426.96,
            "[265,275]": 435.73,
            "[275,285]": 444.49,
            "[285,295]": 453.25,
            "[295,305]": 462.02,
        },
        "HI-SE-SS": {
            "[0,0]": 0,
            "[1,15]": 96.85,
            "[15,25]": 193.7,
            "[25,35]": 193.7,
            "[35,45]": 193.7,
            "[45,55]": 193.7,
            "[55,65]": 211.57,
            "[65,75]": 229.44,
            "[75,85]": 247.30,
            "[85,95]": 265.17,
            "[95,105]": 283.04,
            "[105,115]": 292.35,
            "[115,125]": 301.66,
            "[125,135]": 310.96,
            "[135,145]": 320.27,
            "[145,155]": 329.58,
            "[155,165]": 335.07,
            "[165,175]": 340.57,
            "[175,185]": 346.06,
            "[185,195]": 351.56,
            "[195,205]": 357.05,
            "[205,215]": 369.08,
            "[215,225]": 381.10,
            "[225,235]": 393.13,
            "[235,245]": 405.15,
            "[245,255]": 417.18,
            "[255,265]": 421.66,
            "[265,275]": 426.15,
            "[275,285]": 430.63,
            "[285,295]": 435.12,
            "[295,305]": 439.60,
        },
        "HI-AE-AS": {
            "[0,0]": 0,
            "[1,15]": 71.52,
            "[15,25]": 143.05,
            "[25,35]": 143.05,
            "[35,45]": 143.05,
            "[45,55]": 143.05,
            "[55,65]": 159.71,
            "[65,75]": 176.36,
            "[75,85]": 193.02,
            "[85,95]": 209.68,
            "[95,105]": 226.34,
            "[105,115]": 239.32,
            "[115,125]": 252.29,
            "[125,135]": 265.27,
            "[135,145]": 278.25,
            "[145,155]": 291.23,
            "[155,165]": 301.82,
            "[165,175]": 312.41,
            "[175,185]": 323.01,
            "[185,195]": 333.60,
            "[195,205]": 344.19,
            "[205,215]": 349.08,
            "[215,225]": 353.97,
            "[225,235]": 358.86,
            "[235,245]": 363.75,
            "[245,255]": 368.65,
            "[255,265]": 391.22,
            "[265,275]": 413.80,
            "[275,285]": 436.38,
            "[285,295]": 458.96,
            "[295,305]": 481.53,
        },
        "HI-AE-SS": {
            "[0,0]": 0,
            "[1,15]": 71.02,
            "[15,25]": 142.03,
            "[25,35]": 142.03,
            "[35,45]": 142.03,
            "[45,55]": 142.03,
            "[55,65]": 158.69,
            "[65,75]": 175.35,
            "[75,85]": 192,
            "[85,95]": 208.66,
            "[95,105]": 225.32,
            "[105,115]": 238.30,
            "[115,125]": 251.28,
            "[125,135]": 264.25,
            "[135,145]": 277.23,
            "[145,155]": 290.21,
            "[155,165]": 300.80,
            "[165,175]": 311.40,
            "[175,185]": 321.99,
            "[185,195]": 332.58,
            "[195,205]": 343.17,
            "[205,215]": 348.06,
            "[215,225]": 352.95,
            "[225,235]": 357.84,
            "[235,245]": 362.73,
            "[245,255]": 367.63,
            "[255,265]": 385.92,
            "[265,275]": 404.22,
            "[275,285]": 422.52,
            "[285,295]": 440.82,
            "[295,305]": 459.11,
        },
        "LC-AS": {
            "[0,0]": 0,
            "[1,15]": 120.96,
            "[15,25]": 241.92,
            "[25,35]": 241.92,
            "[35,45]": 241.92,
            "[45,55]": 241.92,
            "[55,65]": 259,
            "[65,75]": 276.08,
            "[75,85]": 293.16,
            "[85,95]": 310.24,
            "[95,105]": 327.32,
            "[105,115]": 335.62,
            "[115,125]": 343.91,
            "[125,135]": 352.21,
            "[135,145]": 360.50,
            "[145,155]": 368.80,
            "[155,165]": 374.30,
            "[165,175]": 379.80,
            "[175,185]": 385.31,
            "[185,195]": 390.81,
            "[195,205]": 396.31,
            "[205,215]": 400.59,
            "[215,225]": 404.87,
            "[225,235]": 409.15,
            "[235,245]": 413.43,
            "[245,255]": 417.71,
            "[255,265]": 418.53,
            "[265,275]": 419.34,
            "[275,285]": 420.16,
            "[285,295]": 420.97,
            "[295,305]": 421.79,
        },
        "LC-SS": {
            "[0,0]": 0,
            "[1,15]": 80.20,
            "[15,25]": 160.39,
            "[25,35]": 160.39,
            "[35,45]": 160.39,
            "[45,55]": 160.39,
            "[55,65]": 177.47,
            "[65,75]": 194.55,
            "[75,85]": 211.63,
            "[85,95]": 228.71,
            "[95,105]": 245.79,
            "[105,115]": 254.09,
            "[115,125]": 262.38,
            "[125,135]": 270.68,
            "[135,145]": 278.98,
            "[145,155]": 287.27,
            "[155,165]": 292.77,
            "[165,175]": 298.28,
            "[175,185]": 303.78,
            "[185,195]": 309.28,
            "[195,205]": 314.79,
            "[205,215]": 319.07,
            "[215,225]": 323.35,
            "[225,235]": 327.63,
            "[235,245]": 331.91,
            "[245,255]": 336.19,
            "[255,265]": 337.0,
            "[265,275]": 337.82,
            "[275,285]": 338.63,
            "[285,295]": 339.45,
            "[295,305]": 340.26,
        },
    },
    "> 48h": {
        "HI-SE-AS": {
            "[0,0]": 0,
            "[1,15]": 125.65,
            "[15,25]": 251.31,
            "[25,35]": 251.31,
            "[35,45]": 251.31,
            "[45,55]": 251.31,
            "[55,65]": 266.60,
            "[65,75]": 281.88,
            "[75,85]": 297.17,
            "[85,95]": 312.46,
            "[95,105]": 327.75,
            "[105,115]": 338.30,
            "[115,125]": 348.85,
            "[125,135]": 359.39,
            "[135,145]": 369.94,
            "[145,155]": 380.49,
            "[155,165]": 384.16,
            "[165,175]": 387.82,
            "[175,185]": 391.49,
            "[185,195]": 395.15,
            "[195,205]": 398.82,
            "[205,215]": 416.35,
            "[215,225]": 433.87,
            "[225,235]": 451.40,
            "[235,245]": 468.93,
            "[245,255]": 486.46,
            "[255,265]": 494.41,
            "[265,275]": 502.36,
            "[275,285]": 510.30,
            "[285,295]": 518.25,
            "[295,305]": 526.20,
        },
        "HI-SE-SS": {
            "[0,0]": 0,
            "[1,15]": 111.90,
            "[15,25]": 223.79,
            "[25,35]": 223.79,
            "[35,45]": 223.79,
            "[45,55]": 223.79,
            "[55,65]": 236.84,
            "[65,75]": 249.89,
            "[75,85]": 262.93,
            "[85,95]": 275.98,
            "[95,105]": 289.02,
            "[105,115]": 312.82,
            "[115,125]": 336.62,
            "[125,135]": 360.41,
            "[135,145]": 384.21,
            "[145,155]": 408.01,
            "[155,165]": 414.93,
            "[165,175]": 421.86,
            "[175,185]": 428.79,
            "[185,195]": 435.71,
            "[195,205]": 442.64,
            "[205,215]": 445.69,
            "[215,225]": 448.75,
            "[225,235]": 451.81,
            "[235,245]": 454.87,
            "[245,255]": 457.92,
            "[255,265]": 477.69,
            "[265,275]": 497.46,
            "[275,285]": 517.23,
            "[285,295]": 537,
            "[295,305]": 556.77,
        },
        "HI-AE-AS": {
            "[0,0]": 0,
            "[1,15]": 104.41,
            "[15,25]": 208.81,
            "[25,35]": 208.81,
            "[35,45]": 208.81,
            "[45,55]": 208.81,
            "[55,65]": 221.26,
            "[65,75]": 233.71,
            "[75,85]": 246.16,
            "[85,95]": 258.61,
            "[95,105]": 271.06,
            "[105,115]": 294.86,
            "[115,125]": 318.66,
            "[125,135]": 342.46,
            "[135,145]": 366.26,
            "[145,155]": 390.06,
            "[155,165]": 396.99,
            "[165,175]": 403.92,
            "[175,185]": 410.84,
            "[185,195]": 417.77,
            "[195,205]": 424.69,
            "[205,215]": 427.75,
            "[215,225]": 430.81,
            "[225,235]": 433.87,
            "[235,245]": 436.92,
            "[245,255]": 439.98,
            "[255,265]": 466.43,
            "[265,275]": 492.88,
            "[275,285]": 519.33,
            "[285,295]": 545.78,
            "[295,305]": 572.23,
        },
        "HI-AE-SS": {
            "[0,0]": 0,
            "[1,15]": 103.90,
            "[15,25]": 207.79,
            "[25,35]": 207.79,
            "[35,45]": 207.79,
            "[45,55]": 207.79,
            "[55,65]": 220.04,
            "[65,75]": 232.29,
            "[75,85]": 244.53,
            "[85,95]": 256.78,
            "[95,105]": 269.02,
            "[105,115]": 292.62,
            "[115,125]": 316.22,
            "[125,135]": 339.81,
            "[135,145]": 363.41,
            "[145,155]": 387.01,
            "[155,165]": 393.93,
            "[165,175]": 400.86,
            "[175,185]": 407.79,
            "[185,195]": 414.71,
            "[195,205]": 421.64,
            "[205,215]": 424.69,
            "[215,225]": 427.75,
            "[225,235]": 430.81,
            "[235,245]": 433.87,
            "[245,255]": 436.92,
            "[255,265]": 459.09,
            "[265,275]": 481.26,
            "[275,285]": 503.43,
            "[285,295]": 525.60,
            "[295,305]": 547.77,
        },
        "LC-AS": {
            "[0,0]": 0,
            "[1,15]": 153.35,
            "[15,25]": 306.70,
            "[25,35]": 306.70,
            "[35,45]": 306.70,
            "[45,55]": 306.70,
            "[55,65]": 319.16,
            "[65,75]": 331.62,
            "[75,85]": 344.09,
            "[85,95]": 356.55,
            "[95,105]": 369.01,
            "[105,115]": 376.51,
            "[115,125]": 384.01,
            "[125,135]": 391.51,
            "[135,145]": 399.0,
            "[145,155]": 406.50,
            "[155,165]": 412.01,
            "[165,175]": 417.51,
            "[175,185]": 423.01,
            "[185,195]": 428.52,
            "[195,205]": 434.02,
            "[205,215]": 437.08,
            "[215,225]": 440.13,
            "[225,235]": 443.19,
            "[235,245]": 446.25,
            "[245,255]": 449.31,
            "[255,265]": 450.32,
            "[265,275]": 451.34,
            "[275,285]": 452.36,
            "[285,295]": 453.38,
            "[295,305]": 454.40,
        },
        "LC-SS": {
            "[0,0]": 0,
            "[1,15]": 109.53,
            "[15,25]": 219.06,
            "[25,35]": 219.06,
            "[35,45]": 219.06,
            "[45,55]": 219.06,
            "[55,65]": 231.52,
            "[65,75]": 243.98,
            "[75,85]": 256.44,
            "[85,95]": 268.91,
            "[95,105]": 281.37,
            "[105,115]": 288.87,
            "[115,125]": 296.36,
            "[125,135]": 303.86,
            "[135,145]": 311.36,
            "[145,155]": 318.86,
            "[155,165]": 324.37,
            "[165,175]": 329.87,
            "[175,185]": 335.37,
            "[185,195]": 340.87,
            "[195,205]": 346.38,
            "[205,215]": 349.44,
            "[215,225]": 352.49,
            "[225,235]": 355.55,
            "[235,245]": 358.61,
            "[245,255]": 361.66,
            "[255,265]": 362.68,
            "[265,275]": 363.70,
            "[275,285]": 364.72,
            "[285,295]": 365.74,
            "[295,305]": 366.76,
        },
    },
}

logements_dommages_unitaires = {
    "< 48h": {
        "HI-SE-AS": {
            "[0,0]": 0,
            "[1,15]": 8481,
            "[15,25]": 16962,
            "[25,35]": 16962,
            "[35,45]": 16962,
            "[45,55]": 16962,
            "[55,65]": 18441,
            "[65,75]": 19921,
            "[75,85]": 21401,
            "[85,95]": 22880,
            "[95,105]": 24360,
            "[105,115]": 25198,
            "[115,125]": 26036,
            "[125,135]": 26874,
            "[135,145]": 27711,
            "[145,155]": 28549,
            "[155,165]": 29068,
            "[165,175]": 29588,
            "[175,185]": 30107,
            "[185,195]": 30626,
            "[195,205]": 31145,
            "[205,215]": 32286,
            "[215,225]": 33426,
            "[225,235]": 34566,
            "[235,245]": 35507,
            "[245,255]": 36847,
            "[255,265]": 37575,
            "[265,275]": 38302,
            "[275,285]": 39030,
            "[285,295]": 39758,
            "[295,305]": 40485,
        },
        "HI-SE-SS": {
            "[0,0]": 0,
            "[1,15]": 8443,
            "[15,25]": 16885,
            "[25,35]": 16885,
            "[35,45]": 16885,
            "[45,55]": 16885,
            "[55,65]": 18365,
            "[65,75]": 19845,
            "[75,85]": 21324,
            "[85,95]": 22804,
            "[95,105]": 24284,
            "[105,115]": 25117,
            "[115,125]": 25951,
            "[125,135]": 26785,
            "[135,145]": 27619,
            "[145,155]": 28452,
            "[155,165]": 28972,
            "[165,175]": 29491,
            "[175,185]": 30010,
            "[185,195]": 30529,
            "[195,205]": 31049,
            "[205,215]": 32189,
            "[215,225]": 33329,
            "[225,235]": 34470,
            "[235,245]": 35610,
            "[245,255]": 36750,
            "[255,265]": 37156,
            "[265,275]": 37561,
            "[275,285]": 37967,
            "[285,295]": 38373,
            "[295,305]": 38778,
        },
        "HI-AE-AS": {
            "[0,0]": 0,
            "[1,15]": 4760,
            "[15,25]": 9520,
            "[25,35]": 9520,
            "[35,45]": 9520,
            "[45,55]": 9520,
            "[55,65]": 10540,
            "[65,75]": 11561,
            "[75,85]": 12582,
            "[85,95]": 13602,
            "[95,105]": 14623,
            "[105,115]": 15511,
            "[115,125]": 16400,
            "[125,135]": 17289,
            "[135,145]": 18178,
            "[145,155]": 19066,
            "[155,165]": 19890,
            "[165,175]": 20714,
            "[175,185]": 21538,
            "[185,195]": 22362,
            "[195,205]": 23186,
            "[205,215]": 23482,
            "[215,225]": 23779,
            "[225,235]": 24075,
            "[235,245]": 24372,
            "[245,255]": 24668,
            "[255,265]": 26213,
            "[265,275]": 27757,
            "[275,285]": 29301,
            "[285,295]": 30845,
            "[295,305]": 32389,
        },
        "HI-AE-SS": {
            "[0,0]": 0,
            "[1,15]": 4722,
            "[15,25]": 9443,
            "[25,35]": 9443,
            "[35,45]": 9443,
            "[45,55]": 9443,
            "[55,65]": 10464,
            "[65,75]": 11485,
            "[75,85]": 12505,
            "[85,95]": 13526,
            "[95,105]": 14546,
            "[105,115]": 15431,
            "[115,125]": 16316,
            "[125,135]": 17200,
            "[135,145]": 18085,
            "[145,155]": 18969,
            "[155,165]": 19793,
            "[165,175]": 20617,
            "[175,185]": 21441,
            "[185,195]": 22265,
            "[195,205]": 23089,
            "[205,215]": 23385,
            "[215,225]": 23682,
            "[225,235]": 23979,
            "[235,245]": 24275,
            "[245,255]": 24572,
            "[255,265]": 25794,
            "[265,275]": 27016,
            "[275,285]": 28238,
            "[285,295]": 29460,
            "[295,305]": 30682,
        },
        "LC-AS": {
            "[0,0]": 0,
            "[1,15]": 5033,
            "[15,25]": 10067,
            "[25,35]": 10067,
            "[35,45]": 10067,
            "[45,55]": 10067,
            "[55,65]": 10979,
            "[65,75]": 11891,
            "[75,85]": 12803,
            "[85,95]": 13715,
            "[95,105]": 14627,
            "[105,115]": 15110,
            "[115,125]": 15593,
            "[125,135]": 16077,
            "[135,145]": 16560,
            "[145,155]": 17044,
            "[155,165]": 17345,
            "[165,175]": 17647,
            "[175,185]": 17949,
            "[185,195]": 18250,
            "[195,205]": 18552,
            "[205,215]": 18811,
            "[215,225]": 19069,
            "[225,235]": 19328,
            "[235,245]": 19587,
            "[245,255]": 19846,
            "[255,265]": 19898,
            "[265,275]": 19950,
            "[275,285]": 20002,
            "[285,295]": 20054,
            "[295,305]": 20106,
        },
        "LC-SS": {
            "[0,0]": 0,
            "[1,15]": 4136,
            "[15,25]": 8273,
            "[25,35]": 8273,
            "[35,45]": 8273,
            "[45,55]": 8273,
            "[55,65]": 9185,
            "[65,75]": 10097,
            "[75,85]": 11009,
            "[85,95]": 11921,
            "[95,105]": 12833,
            "[105,115]": 13316,
            "[115,125]": 13800,
            "[125,135]": 14283,
            "[135,145]": 14767,
            "[145,155]": 15250,
            "[155,165]": 15552,
            "[165,175]": 15853,
            "[175,185]": 16155,
            "[185,195]": 16457,
            "[195,205]": 16758,
            "[205,215]": 17017,
            "[215,225]": 17276,
            "[225,235]": 17535,
            "[235,245]": 17794,
            "[245,255]": 18052,
            "[255,265]": 18104,
            "[265,275]": 18156,
            "[275,285]": 18208,
            "[285,295]": 18260,
            "[295,305]": 18312,
        },
    },
    "> 48h": {
        "HI-SE-AS": {
            "[0,0]": 0,
            "[1,15]": 11021,
            "[15,25]": 22041,
            "[25,35]": 22041,
            "[35,45]": 22041,
            "[45,55]": 22041,
            "[55,65]": 23308,
            "[65,75]": 24575,
            "[75,85]": 25842,
            "[85,95]": 27109,
            "[95,105]": 28376,
            "[105,115]": 29334,
            "[115,125]": 30292,
            "[125,135]": 31250,
            "[135,145]": 32207,
            "[145,155]": 33165,
            "[155,165]": 33521,
            "[165,175]": 33876,
            "[175,185]": 34232,
            "[185,195]": 34587,
            "[195,205]": 34943,
            "[205,215]": 36578,
            "[215,225]": 38212,
            "[225,235]": 39847,
            "[235,245]": 41481,
            "[245,255]": 43116,
            "[255,265]": 43772,
            "[265,275]": 44429,
            "[275,285]": 45085,
            "[285,295]": 45741,
            "[295,305]": 46397,
        },
        "HI-SE-SS": {
            "[0,0]": 0,
            "[1,15]": 8715,
            "[15,25]": 17430,
            "[25,35]": 17430,
            "[35,45]": 17430,
            "[45,55]": 17430,
            "[55,65]": 18446,
            "[65,75]": 19463,
            "[75,85]": 20479,
            "[85,95]": 21495,
            "[95,105]": 22512,
            "[105,115]": 24392,
            "[115,125]": 26272,
            "[125,135]": 28152,
            "[135,145]": 30031,
            "[145,155]": 31911,
            "[155,165]": 32463,
            "[165,175]": 33014,
            "[175,185]": 33565,
            "[185,195]": 34116,
            "[195,205]": 34668,
            "[205,215]": 34845,
            "[215,225]": 35022,
            "[225,235]": 35200,
            "[235,245]": 35377,
            "[245,255]": 35554,
            "[255,265]": 36946,
            "[265,275]": 38339,
            "[275,285]": 39731,
            "[285,295]": 41123,
            "[295,305]": 42515,
        },
        "HI-AE-AS": {
            "[0,0]": 0,
            "[1,15]": 6880,
            "[15,25]": 13760,
            "[25,35]": 13760,
            "[35,45]": 13760,
            "[45,55]": 13760,
            "[55,65]": 14551,
            "[65,75]": 15341,
            "[75,85]": 16132,
            "[85,95]": 16923,
            "[95,105]": 17713,
            "[105,115]": 19543,
            "[115,125]": 21372,
            "[125,135]": 23201,
            "[135,145]": 25031,
            "[145,155]": 26860,
            "[155,165]": 27416,
            "[165,175]": 27971,
            "[175,185]": 28526,
            "[185,195]": 29082,
            "[195,205]": 29637,
            "[205,215]": 29815,
            "[215,225]": 29992,
            "[225,235]": 30169,
            "[235,245]": 30347,
            "[245,255]": 30524,
            "[255,265]": 32353,
            "[265,275]": 34183,
            "[275,285]": 36012,
            "[285,295]": 37841,
            "[295,305]": 39671,
        },
        "HI-AE-SS": {
            "[0,0]": 0,
            "[1,15]": 6837,
            "[15,25]": 13674,
            "[25,35]": 13674,
            "[35,45]": 13674,
            "[45,55]": 13674,
            "[55,65]": 14451,
            "[65,75]": 15228,
            "[75,85]": 16006,
            "[85,95]": 16783,
            "[95,105]": 17560,
            "[105,115]": 19381,
            "[115,125]": 21201,
            "[125,135]": 23021,
            "[135,145]": 24841,
            "[145,155]": 26661,
            "[155,165]": 27207,
            "[165,175]": 27752,
            "[175,185]": 28297,
            "[185,195]": 28842,
            "[195,205]": 29388,
            "[205,215]": 29565,
            "[215,225]": 29742,
            "[225,235]": 29920,
            "[235,245]": 30097,
            "[245,255]": 30274,
            "[255,265]": 31782,
            "[265,275]": 33289,
            "[275,285]": 34796,
            "[285,295]": 36304,
            "[295,305]": 37811,
        },
        "LC-AS": {
            "[0,0]": 0,
            "[1,15]": 3742,
            "[15,25]": 7484,
            "[25,35]": 7484,
            "[35,45]": 7484,
            "[45,55]": 7484,
            "[55,65]": 7960,
            "[65,75]": 8436,
            "[75,85]": 8912,
            "[85,95]": 9388,
            "[95,105]": 9864,
            "[105,115]": 9988,
            "[115,125]": 10112,
            "[125,135]": 10237,
            "[135,145]": 10361,
            "[145,155]": 10486,
            "[155,165]": 10496,
            "[165,175]": 10506,
            "[175,185]": 10516,
            "[185,195]": 10527,
            "[195,205]": 10537,
            "[205,215]": 10537,
            "[215,225]": 10537,
            "[225,235]": 10537,
            "[235,245]": 10537,
            "[245,255]": 10537,
            "[255,265]": 10859,
            "[265,275]": 11181,
            "[275,285]": 11503,
            "[285,295]": 11825,
            "[295,305]": 12147,
        },
        "LC-SS": {
            "[0,0]": 0,
            "[1,15]": 5760,
            "[15,25]": 11520,
            "[25,35]": 11520,
            "[35,45]": 11520,
            "[45,55]": 11520,
            "[55,65]": 12180,
            "[65,75]": 12840,
            "[75,85]": 13501,
            "[85,95]": 14161,
            "[95,105]": 14822,
            "[105,115]": 15267,
            "[115,125]": 15712,
            "[125,135]": 16158,
            "[135,145]": 16603,
            "[145,155]": 17049,
            "[155,165]": 17350,
            "[165,175]": 17652,
            "[175,185]": 17954,
            "[185,195]": 18255,
            "[195,205]": 18557,
            "[205,215]": 18738,
            "[215,225]": 18920,
            "[225,235]": 19101,
            "[235,245]": 19282,
            "[245,255]": 19464,
            "[255,265]": 19523,
            "[265,275]": 19582,
            "[275,285]": 19641,
            "[285,295]": 19700,
            "[295,305]": 19759,
        },
    },
}


def classeHEau(h_eau):
    if h_eau <= 0:
        return 0
    if h_eau < 0.15:
        return 1
    return min(round(h_eau * 10), 30)


def rasterValue_from_point(raster, feature_geometry):
    value = 0
    if feature_geometry.isMultipart():
        x = feature_geometry.asMultiPoint()[0].x()
        y = feature_geometry.asMultiPoint()[0].y()
    else:
        x = feature_geometry.asPoint().x()
        y = feature_geometry.asPoint().y()
    ident = raster.dataProvider().identify(QgsPointXY(x, y), QgsRaster.IdentifyFormatValue)
    if ident is not None:
        value = ident.results()[1]

    return value if value is not None else 0


def rasterValue_from_polygon(raster, feature_geometry, stat):
    result = QgsZonalStatistics.calculateStatistics(
        raster.dataProvider(), feature_geometry, raster.rasterUnitsPerPixelX(), raster.rasterUnitsPerPixelY(), 1, stat
    )

    return result[0] if result[0] is not None else 0
